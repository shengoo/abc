"use strict";$(function(){function t(n){if(n&&$(".single").length){var t=$(".single input");t[0].value=n.CNName;t[1].value=n.ENName;$('.single input[name="sex"]')[n.Sex==0?1:0].checked=!0;t[4].value=webAbc.dateParseString(n.Birthday?new Date(parseInt(n.Birthday.substr(6,12))):new Date,!0,!1);t[5].value=n.Email;$("#myphone").html(n.Mobile);$(".single textarea")[0].value=n.Voice;$(".single textarea")[1].value=n.Address}}var n=$(".single");webAbc.ajax({url:$.url+"/Member/GetMember",type:"post",dataType:"json",success:function(n){t(n)}});n.find("input").keyup(function(){var t=$(this),i=$(this.nextSibling),r=t.attr("name"),n=t.val();t.removeClass("error");i.removeClass("error");n!=""&&(r=="name"&&(!/^\S[a-zA-Z\s\d\u4e00-\u9fa5]+\S$/.test(n)||n.length<2||n.length>6)?(i.addClass("error"),t.addClass("error")):r=="sign"&&(!/^[a-zA-Z.]+$/.test(n)||n.length<2||n.length>20)?(i.addClass("error"),t.addClass("error")):r=="nick"&&(!/^[\u4e00-\u9fa5\w]+$/.test(n)||n.length<1||n.length>20)?(i.addClass("error"),t.addClass("error")):r!="email"||/^\w{1,16}@\w{1,10}[.]+\w{1,5}$/.test(n)||(i.addClass("error"),t.addClass("error")))});n.find(".btn").click(function(){var t=n.find("input");if(t.hasClass("error")){webAbc.showMessage(2,"请输入正确的用户信息！");return}if(!t[4].value){webAbc.showMessage(2,"生日不能为空！");return}if(!t[0].value){webAbc.showMessage(2,"中文名不能为空！");return}if(!t[1].value){webAbc.showMessage(2,"英文名不能为空！");return}$("iframe").contents().find("input[type='submit']").click();webAbc.ajax({url:$.url+"/Member/SaveMember",data:{CNName:t[0].value,ENName:t[1].value,Voice:$(".single textarea").eq(0).val(),Sex:$('.single input[name="sex"]')[0].checked?1:0,Birthday:t[4].value,Email:t[5].value,Address:$(".single textarea").eq(1).val()},type:"post",dataType:"json",success:function(){window.parent.updateUser(t[1].value);webAbc.showMessage(1,"个人信息修改成功！");$("iframe").height("119px")}})})});