"use strict";window.reloadIndex=function(){window.location.href=window.location.href};window!=window.parent&&window.parent.reloadIndex&&window.parent.reloadIndex();var configs={index:{xinlang:{text:"扫码关注",src:"../Images/twodimensioncode.jpg"},weibo:{text:"关注ABC微信",src:"../Images/twodimensioncode.jpg"}}};$(document).ready(function(){function n(n){window.CurrentUser=n;$(".close").click();$(".xubox_close").click();$(".layui-layer-close").click();$(".right ul").addClass("hidden");$(".header .get").addClass("hidden");$(".user span").eq(0).html("您好，"+n.Name+"，欢迎你！");$(".user span").eq(1).html('<a href="javascript:loginOut();" target="_self">退出<\/a>');n.Type!=1&&$("#hidTab").html("个人中心");(n.Type==2||n.Type==4)&&$("#hidTab").attr("href","/Member/Member?action=myanswer");$("#ContentFrame")[0].contentWindow.location.reload();$(".nav li").removeClass("hidden");$(".nav li:last").show();$(".user").removeClass("hidden");$("#login").hide()}var t=window.location.href.split("/").length>1?"/Home":"";$(".right-01,.right-02,.opts li").bind("click",function(){showLogin($(this).hasClass("right-02")||$(this).hasClass("opt-two")?2:1)});$('li[action="appDown"]').mouseover(function(){var i=$(this),t=$('li[action="appDown"]')[0]==this?configs.index.weibo:configs.index.weixin,n=$(".appDown");n.css({left:this.offsetLeft+"px",top:document.body.scrollTop+this.offsetTop+this.offsetHeight+"px"});$(".appDown_title",n).html(t.text);$("img",n).attr("src",t.src);n.removeClass("hidden")}).mouseout(function(){$(".appDown").addClass("hidden")});$(".register_title").mousedown(function(n){$(this).css("cursor","move");var t=$(".login").offset(),i=n.pageX-t.left,r=n.pageY-t.top;$(document).bind("mousemove",function(n){$(".login").stop();var t=n.pageX-i,u=n.pageY-r;$(".login").animate({left:t+"px",top:u+"px"},10)})});$(document).mouseup(function(){$(".register_title").css("cursor","default");$(this).unbind("mousemove")});$("button").bind("click",function(){var o=this,c=$(o),e=c.attr("method"),r,s;if(e=="hidemasktip")$(".masktip").addClass("hidden");else if(e=="login"){var l=$("#Form1 input"),f=l.eq(0).val(),u=l.eq(1).val();if(!f||!u){showMessage(2,"用户名或密码不能为空！");return}webAbc.ajax({url:"/Home/Login",data:{UserName:f,Pwd:u,isSave:$(".autologin")[0].checked},success:function(t){n(t)}})}else if(e=="register"){var r=$("#Form2 input"),f=r.eq(0).val(),u=r.eq(1).val(),h=r.eq(3).val(),i="";if(f&&f.length==11?!u||u.length<6?i="请输入至少6位的密码！":u!=r.eq(2).val()?i="两次输入的密码不一致！":h||(i="请输入短信验证码！"):i="请输入正确的电话号码！",i){showMessage(2,i);return}$.ajax({url:$.url+t+"/Register",type:"post",data:{user:f,pwd:u,userType:1,valid:h},dataType:"json",success:function(t){t.IsSuccess?(showMessage(1,"您已注册成功！"),n(t.Result)):showMessage(2,t.ErrMsg)}})}else if(e=="action")$("iframe")[0].src=o.attributes.action.value;else if(e=="sendValid"){if(r=$('input[name="UserName"]'),s=r.eq(c.attr("data")).val(),console.log(r,s),!s||s.trim().length!=11){showMessage(2,"您输入的手机号码有误！");return}parseInt(o.innerHTML)||$.ajax({url:"/Home/sendvalid",type:"post",dataType:"json",data:{mobile:s,isupdate:c.attr("data")==1},success:function(n){var t,i;n.IsSuccess?(t=60,showMessage(1,"短信发送成功！"),i=setInterval(function(){if(t==0){o.innerHTML="获取验证码";clearInterval(i);return}o.innerHTML=t--+"秒后重新发送"},1e3)):showMessage(2,n.ErrMsg)}})}else if(e=="modifyPassword"){var r=$(".searchPassword input"),f=r.eq(0).val(),u=r.eq(1).val(),h=r.eq(3).val(),i="";if(f&&f.length==11?!u||u.length<6?i="请输入至少6位的密码！":u!=r.eq(2).val()?i="两次输入的密码不一致！":h||(i="请输入短信验证码！"):i="请输入正确的电话号码！",i){showMessage(2,i);return}webAbc.ajax({url:$.url+"/Home/ModifyPassword",data:{user:f,pwd:u,valid:h},success:function(t){n(t)}})}});$.ajax({url:$.url+"/Home/GetArtcleForFooter",type:"post",data:{},dataType:"json",success:function(n){if(n.ret){var t="";$.each(n.obj,function(n,i){t+='<div class="footer-list" '+(n===0?'style="margin: 0 0 0 20px;"':"")+">";t+="<h3>"+i.ArtcleCateName+"<\/h3><ul>";$.each(i.ArtcleList,function(n,i){t+="<li><img src='/Content/icon/abccon.jpg' style=' margin-bottom: 2px; margin-right: 4px;'><\/img><a>"+i.Title+"<\/a><\/li>"});t+="<\/ul><\/div>"});$(".footer .w1000").html(t)}}});$.ajax({url:$.url+t+"/GetLogin",type:"post",data:{login:$.cookie("loginname")},dataType:"json",success:function(t){t.IsSuccess?n(t.Result):$(".choose-page").show()}})});window.setTab=function(n,t,i){for(var u,f,r=1;r<=i;r++)u=document.getElementById(n+r),f=document.getElementById("con-"+n+"-"+r),u.className=r==t?"hover":"",f.style.display=r==t?"block":"none"};window.loginOut=function(){$.ajax({url:$.url+"/Home/LoginOut",data:Math.random(),type:"post",dataType:"json",success:function(n){n.IsSuccess&&(window.location.href=window.location.href)}})};window.showLogin=function(){window.CurrentUser||($("#login .login").show(),$("#login .register").hide(),webAbc.openDom($("#login")))};window.showRegister=function(){window.CurrentUser||($("#login .login").hide(),$("#login .register").show(),webAbc.openDom($("#login")))};window.searchPassword=function(){webAbc.openDom($(".searchPassword"))};window.showMessage=function(n,t){layer.alert(t,{icon:n||1,move:!1,title:" ",shadeClose:!0,skin:"layer-ext-abc"});var i=$("#layui-layer"+layer.index);console.log($(window.top).height(),i.height(),window.top.scrollY);i.length&&i.css({top:($(window.top).height()-i.height())/2+window.top.scrollY-71})};window.updateUser=function(n){$(".user span").eq(0).html("您好，"+n+"，欢迎你！")};window.updateContentFrameHeight=function(n){$("#ContentFrame").css({height:n})};$(function(){$("#login_register").click(function(){$("#login .login").hide();$("#login .register").show();$(".layui-layer-content").css({height:"auto"})});$("#register_login").click(function(){$("#login .login").show();$("#login .register").hide();$(".layui-layer-content").css({height:"auto"})});$(".header .get .exit").click(function(){showLogin()});$(".header .get .enroll").click(function(){showRegister()});$(".fixed-register .buttons").click(function(){window.top.showRegister()});$(".page-type.adult").click(function(){$(".choose-page").hide()});$(".choose-page-link").click(function(n){n.preventDefault();document.getElementById("ContentFrame").src=n.target.href;$(".choose-page").hide()});$(".footer-icon").click(function(){$("body, html").animate({scrollTop:0},800)})});